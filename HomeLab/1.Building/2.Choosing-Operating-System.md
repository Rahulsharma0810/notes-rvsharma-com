## Time to Choose OS

I have below KPI or KRIs in mind before Installing anything (Although i Have tried all possibilities in the build),

- Performance is Must(Saving Compute on GUI).
- Easy Kubernetes via Virtualisation.
- Able to use GPU 4080/4090 For LLM Use and Training.
- Flexing ðŸ‘¨â€â¤ï¸â€ðŸ‘¨
    - RGB Lights on Fans can be controlled.
    - Temperature Digits on ARGB Cooler Display.
### Windows 11

Pros :

- Out of the box Support for Motherboard, Other Accessories.
- Ant esports software available in windows for ARGB Display.

Cons:

- WSL is impossible For K8s Clustering.
    - WSL Use Dynamic Allocation for Disk Size, Fixed Sizing could have been better.
- WSL2 Isn't straight forward to provide to Local Static IP.

**Some Notes on, How i tried to setup WSL2 in Windows**

```bash
#~/.wslconfig

[wsl2]
memory=24GB #Limit configured to 75%(24GB)-25%(6GB).
```

[Source](https://fizzylogic.nl/2023/01/05/how-to-configure-memory-limits-in-wsl2)

**Setup For WSL2 Ubuntu**

To install WSL on manual location, needs to download the tar from [ubuntu cloud image](https://cloud-images.ubuntu.com/wsl/noble/current/)

```
wsl --import microk8s D:\\\\microk8s "C:\\\\Users\\\\sharm\\\\Downloads\\\\ubuntu-noble-wsl-amd64-ubuntu24.04lts.rootfs.tar.gz" --version 2
```

Config below for disable automounts.

```
[boot]
systemd=true

[automount]
enabled = false
```

Used Snap to install MicroK8S.

Not found a way to manage cluster for example, editing kube-apiserver.yaml to add IP for cert etc.

**Side Notes** : Armory Crate and AuraSync are the software, which get installed to control RGB fans stuff. However the software is laggy. I Install OpenRGB in windows and Uninstalled Armory. Please see [[#Awesome OpenRGB]]

I quit in windows, to save management hours and as well not wasting computes on GUI and biggest i could use Hyper V perhaps it doesn't support USB passthrough.

### Installing ESXI

Installed ESXI 8, Can access WebUI.

On Installing Windows, Setup Shown it can't install windows because the PC doesn't meet the requirement.

ESXI Web UI shown below Warning

```
TPM 2.0 device detected but a connection cannot be established.
```

In MB Bios Enabled, TPM, UEFI etc. Perhaps it doesn't helped.

I also found some users had issue in forwarding Graphic card, and its concerning fact. Because i need to use Graphic card in near future.

### Installing Proxmox VE

I Have installed Proxmox on temp ssd to check OpenRGB.

ASUS Rog X670E-E Devices were found, Both HyperX Rams RGB worked, Motherboard RGB doesn't work.

Tried with all USB pass thought From Proxmox to windows VM, Installed ASUS Armory or Aura SYCN tool, Nothing got detected.

**Even Though Passing all USB and RAW PCI, Windows is not detecting the tool.**

---

### Awesome OpenRGB

Installed OpenRGB on Debian Using this [Guide](https://pmcvtm.com/adding-openrgb-to-proxmox)

### What Worked



- [x] Memory Lights
- [ ] Motherboard RGB are not detected, [Created Issue](https://gitlab.com/CalcProgrammer1/OpenRGB/-/issues/4397). #tasks #reasearch #followup
- [ ] Liquid Cooling Display. #tasks #reasearch

### Integrate OpenRGB with HomeAssistant

Installed This [Plugin](https://github.com/koying/openrgb_ha) in Home Assistant to control it from home assistant and Then in Homekit.





## Choosing the Operating System

### ðŸ§  Goals & Considerations

Before installing any OS, I had a few **key performance indicators (KPIs)** and **risk indicators (KRIs)** in mind. I also tested most options before finalizing anything.

**Requirements:**

- âœ… High performance (no resource drain on GUI)
- âœ… Easy Kubernetes deployment via virtualization
- âœ… Full use of RTX 4080/4090 GPU for LLM use/training
- âœ… ðŸ‘¨â€â¤ï¸â€ðŸ‘¨ Flexing Â 
Â  - Control **RGB lights** on fans Â 
Â  - Display **CPU temperature** on ARGB cooler screen 
---

### ðŸªŸ Windows 11

#### âœ… Pros:

- Plug-and-play support for motherboard, GPU, and accessories Â 
- Official **Ant Esports** software for ARGB display Â 

#### âŒ Cons:

- **WSL2 isn't ideal for Kubernetes clusters** Â 
Â  - Dynamic disk sizing is inefficient Â 
Â  - Static IP assignment is a pain Â 
- **Hyper-V** lacks proper **USB passthrough support** Â 
- GUI overhead wastes compute for a homelab setup Â 

#### âš™ï¸ Notes on WSL2 Setup

```bash

# ~/.wslconfig

[wsl2]

memory=24GBÂ  # Limits usage to 75% (24GB) of system memory
```

> [Source: fizzylogic.nl](https://fizzylogic.nl/2023/01/05/how-to-configure-memory-limits-in-wsl2)  

**Manual WSL2 Install:**

```
Wsl --import microk 8 s D:\\microk 8 s "C:\\Users\\sharm\\Downloads\\ubuntu-noble-wsl-amd 64-ubuntu 24.04 lts. Rootfs. Tar. Gz" --version 2
```

Disable auto-mounts with:

```
[boot]
systemd=true

[automount]
enabled = false
```

Installed MicroK8s using Snap, but faced issues managing cluster configuration (e.g., editing kube-apiserver.yaml for certs/IP).


> ðŸ’¡ **Note**: Tried **Armoury Crate** and **Aura Sync** for RGB control, but both were buggy. Installed **OpenRGB** instead and uninstalled ASUS software. (See: [Awesome OpenRGB](#awesome-openrgb))

  

âž¡ï¸ **Conclusion**: Dropped Windows to avoid wasting hours managing it, save compute power, and due to limited support for USB passthrough.

---

## **â˜‘ï¸ ESXi 8 Installation**
  

Installed **VMware ESXi 8** â€“ basic setup worked, and WebUI was accessible.

However, encountered an issue while installing a Windows VM:

```
Windows cannot be installed: PC does not meet requirements
```

Also, ESXi Web UI showed:

```
TPM 2.0 device detected but a connection cannot be established.
```

Despite enabling TPM, UEFI, and other BIOS settings, the issue persisted.

âš ï¸ Found online reports about **ESXi struggling with GPU passthrough**, which is a **deal-breaker** for future LLM workloads.

---

## **ðŸ› ï¸ Proxmox VE Installation**

Installed **Proxmox VE 8** on a temporary SSD to test **OpenRGB** compatibility.

â€¢ âœ… Detected all devices on ASUS ROG X670E-E

â€¢ âœ… HyperX RAM RGB working via OpenRGB

â€¢ âŒ Motherboard RGB not detected


Tested **USB passthrough** from Proxmox to a Windows VM:

â€¢ Installed Armoury Crate & Aura Sync
â€¢ **Nothing was detected** by the apps, even with raw PCIe passthrough


> â— Even after passing all USB and PCI devices, Windows failed to detect the RGB controllers.

---

**ðŸŽ¨ Awesome OpenRGB**

Installed **OpenRGB** on Debian following this [guide](https://pmcvtm.com/adding-openrgb-to-proxmox).

**âœ… What Worked**

![[attachments/2024-12-11_15-36-41.png]]

| **Feature**           | **Status**     | **Notes**                                                                           |
| --------------------- | -------------- | ----------------------------------------------------------------------------------- |
| Memory RGB            | âœ… Working      | Fully detected and controllable                                                     |
| Motherboard RGB       | âŒ Not Detected | [Created issue](https://gitlab.com/CalcProgrammer1/OpenRGB/-/issues/4397) #followup |
| Liquid Cooler Display | âŒ Not Detected | Needs more research #tasks                                                          |

**ðŸ¡ Integrating OpenRGB with Home Assistant**

Installed this [Home Assistant plugin](https://github.com/koying/openrgb_ha) to control lighting through Home Assistant â†’ HomeKit.  

> ðŸŽ¯ Goal: Control RGB lighting via automations or Siri/Shortcuts.